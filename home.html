<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Le nostre foto ❤️</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<h1>Le nostre foto</h1>
<div class="gallery" id="gallery"></div>

<script>

const user = "GianRoby";
const repo = "noi";

fetch(`https://api.github.com/repos/${user}/${repo}/contents/foto`)
  .then(res => res.json())
  .then(files => {
    files.sort((a, b) => a.name.localeCompare(b.name));
    const gallery = document.getElementById("gallery");
    files.forEach(file => {
      if(file.name.match(/\.(jpg|jpeg|png|gif)$/i)){ // solo immagini
        const img = document.createElement("img");
        img.src = file.download_url;
        gallery.appendChild(img);
      }
    });
  })
  .catch(err => console.log("Errore caricamento immagini:", err));
</script>
  <!-- Lightbox popup -->
<div id="lightbox" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.9); justify-content:center; align-items:center;">
  <img id="lightbox-img" src="" style="max-width:90%; max-height:90%; border-radius:12px;">
</div>

<script>
// Lightbox
const lightbox = document.getElementById("lightbox");
const lightboxImg = document.getElementById("lightbox-img");

// Aggiungi evento click a tutte le immagini appena create
document.getElementById("gallery").addEventListener("click", e => {
  if(e.target.tagName === "IMG"){
    lightboxImg.src = e.target.src;
    lightbox.style.display = "flex";
  }
});

// Chiudi lightbox cliccando fuori dall'immagine
lightbox.addEventListener("click", e => {
  if(e.target === lightbox){
    lightbox.style.display = "none";
  }
});
</script>

</body>
</html>
